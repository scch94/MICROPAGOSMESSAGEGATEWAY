[2024-05-20 23:56:54.650] [micropagosmessagegateway] [middleware] [info] [ef4b60c3c491] New petition received
[2024-05-20 23:56:54.650] [micropagosmessagegateway] [middleware] [trace] [ef4b60c3c491] url: /ws/SendMessageService, method: POST
[2024-05-20 23:56:54.650] [micropagosmessagegateway] [middleware] [info] [ef4b60c3c491] starting to validate the ahutentication
[2024-05-20 23:56:54.650] [micropagosmessagegateway] [middleware] [info] [ef4b60c3c491] starting Authentication proccess for eaguerre
[2024-05-20 23:56:54.650] [micropagosmessagegateway] [middleware] [info] [ef4b60c3c491] the user:eaguerre is already authenticated
[2024-05-20 23:56:54.651] [micropagosmessagegateway] [handler] [info] [ef4b60c3c491] starting to sendMessage method to the user eaguerre
[2024-05-20 23:56:54.651] [micropagosmessagegateway] [handler] [debug] [ef4b60c3c491] starting to get the xml
[2024-05-20 23:56:54.651] [micropagosmessagegateway] [handler] [trace] [ef4b60c3c491] this is the body of the petition <soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:web="http://webservices.ravenws.micropagos.com.uy/">\n   <soapenv:Header/>\n   <soapenv:Body>\n      <web:send>\n         <!--Optional:-->\n         <mobile>099111111</mobile>\n         <!--Optional:-->\n         <message>tes</message>\n         <useOriginName></useOriginName>\n      </web:send>\n   </soapenv:Body>\n</soapenv:Envelope>
[2024-05-20 23:56:54.651] [micropagosmessagegateway] [handler] [info] [ef4b60c3c491] method: send indivuald message, starting to validate the petition 
[2024-05-20 23:56:54.651] [micropagosmessagegateway] [handler] [debug] [ef4b60c3c491] PETITION[ef4b60c3c491] this is the data that we are going to validate : Mobile: 099111111, Message: tes, 
[2024-05-20 23:56:54.651] [micropagosmessagegateway] [validation] [info] [ef4b60c3c491] PETITION[ef4b60c3c491], starting to validate a regex expression
[2024-05-20 23:56:54.651] [micropagosmessagegateway] [validation] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], regex expression: ^09\d{7}$ value to validate 099111111
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [validation] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], value match with the regex expression
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [validation] [debug] [ef4b60c3c491] starting to format number
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [handler] [debug] [ef4b60c3c491] PETITION[ef4b60c3c491], the mobile number pass the regex expression and the formatted number is 59899111111
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [validation] [info] [ef4b60c3c491] PETITION[ef4b60c3c491], starting to validate th message length
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [validation] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], max length: 500 message to validate tes
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [validation] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], using normal message
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [handler] [debug] [ef4b60c3c491] PETITION[ef4b60c3c491], the message pass the validateMessageLength this is the final message: tes
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [handler] [info] [ef4b60c3c491] PETITION[ef4b60c3c491], checking short number
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [handler] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], using short number of the config
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [client] [info] [ef4b60c3c491] PETITION[ef4b60c3c491], startin to prepare the call to databasegateway GetUserDomain
[2024-05-20 23:56:54.652] [micropagosmessagegateway] [client] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], starting to prepare the URL to the petition
[2024-05-20 23:56:54.653] [micropagosmessagegateway] [client] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], petition http created
[2024-05-20 23:56:54.653] [micropagosmessagegateway] [client] [info] [ef4b60c3c491] PETITION[ef4b60c3c491], Final url : http://localhost:2121/userdomain/eaguerre/ef4b60c3c491
[2024-05-20 23:56:54.697] [micropagosmessagegateway] [client] [error] [ef4b60c3c491] PETITION[ef4b60c3c491], Error when we do the petition to micropagos databse: Get "http://localhost:2121/userdomain/eaguerre/ef4b60c3c491": dial tcp [::1]:2121: connectex: No connection could be made because the target machine actively refused it.
[2024-05-20 23:56:54.699] [micropagosmessagegateway] [client] [error] [ef4b60c3c491] PETITION[ef4b60c3c491], error when we try to  callToMicropagosGetUserDomainDatabase()
[2024-05-20 23:56:54.699] [micropagosmessagegateway] [handler] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], have an error when we try to CallToGetUserDomain() 
[2024-05-20 23:56:54.699] [micropagosmessagegateway] [handler] [error] [ef4b60c3c491] PETITION[ef4b60c3c491], error when we try to getshortnumber(): 
[2024-05-20 23:56:54.699] [micropagosmessagegateway] [handler] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], this is the data of the validation result {PassedValidation:true ValidationMessage: UserDomainResult:{UserDomainResult:Get "http://localhost:2121/userdomain/eaguerre/ef4b60c3c491": dial tcp [::1]:2121: connectex: No connection could be made because the target machine actively refused it. UserDomainMessage:have an error when we try to CallToGetUserDomain() UserDomainError:have an error when we try to CallToGetUserDomain()} PortabilidadResult:{PassedPortabilidad:false PortabilidadMessage:} FilterResult:{IsFilter:false FilterMessage: Error:<nil>} WhenSendResult:{SendNow:false SendMessage:} SmsgatewayResult:{PassedSmsgateway:false SmsgatewayResult: SmsgatewayDescription:}}
[2024-05-20 23:56:54.699] [micropagosmessagegateway] [handler] [debug] [ef4b60c3c491] PETITION[ef4b60c3c491], error when we try to procees the message time to insert the message into the database with err: have an error when we try to CallToGetUserDomain()
[2024-05-20 23:56:54.700] [micropagosmessagegateway] [client] [info] [ef4b60c3c491] PETITION[ef4b60c3c491], startin to prepare the call to databasegateway to INSERT message
[2024-05-20 23:56:54.700] [micropagosmessagegateway] [client] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], starting to prepare the body of the petition
[2024-05-20 23:56:54.700] [micropagosmessagegateway] [client] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491], petition http created
[2024-05-20 23:56:54.700] [micropagosmessagegateway] [client] [info] [ef4b60c3c491] PETITION[ef4b60c3c491], Final url : http://localhost:2121/insertMessage
[2024-05-20 23:56:54.700] [micropagosmessagegateway] [client] [info] [ef4b60c3c491] PETITION[ef4b60c3c491], Final BODY: {"utfi":"ef4b60c3c491","type":"OutboundSMS","content":"tes","mobile_number":"59899111111","mobile_country_iso_code":"UY","short_number":"","telco":"","created":"2024-05-20T23:56:54.6517637-05:00","session_action":"NONE","processed":"2024-05-20T23:56:54.7000791-05:00","session_application_name":"micropagos 2.0","sendafter":"","sendbefore":"","sent":"0001-01-01T00:00:00Z","status":"ERROR","origin_name":""}
[2024-05-20 23:56:54.702] [micropagosmessagegateway] [client] [error] [ef4b60c3c491] PETITION[ef4b60c3c491], Error when we do the petition to micropagos databse: Post "http://localhost:2121/insertMessage": dial tcp [::1]:2121: connectex: No connection could be made because the target machine actively refused it.
[2024-05-20 23:56:54.702] [micropagosmessagegateway] [client] [error] [ef4b60c3c491] PETITION[ef4b60c3c491], error when we try to callToMicropagosDatabase
[2024-05-20 23:56:54.702] [micropagosmessagegateway] [handler] [error] [ef4b60c3c491] PETITION[ef4b60c3c491], error calling database err: have an error when we try to CallToGetUserDomain()
[2024-05-20 23:56:54.702] [micropagosmessagegateway] [handler] [trace] [ef4b60c3c491] PETITION[ef4b60c3c491] Ended
[2024-05-20 23:56:54.702] [micropagosmessagegateway] [middleware] [info] [ef4b60c3c491] Request took 52.706ms
